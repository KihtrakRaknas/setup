<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>Quick Comp. Set Up</title>
  </head>
  <body>
    <div class="container-fluid">
    	<h1 class="text-center display-4"style="max-width:100%">Downloads!</h1>
        <div id="links">
        	<div style="width:100%;display:flex;justify-content: center;" class="btn-group btn-group-toggle" data-toggle="buttons">
            <div class="input-group-prepend">
              <div class="input-group-text" id="btnGroupAddon">OS</div>
            </div>
      		  <label class="btn btn-outline-success active" id="windows">
      		    <input type="radio" name="Download" autocomplete="off" checked> Windows
      		  </label>
      		  <label class="btn btn-outline-success" id="mac">
      		    <input type="radio" name="To to download page" autocomplete="off"> Mac OS X
      		  </label>
      		  <label class="btn btn-outline-success" id="Linux/Unix">
      		  	<input type="radio" name="null" autocomplete="off"> Linux/Unix
      		  </label>
    		  </div>
          <br>
          <br>
        </div>
		<br>
		<br>
		<button onclick="start()" data-toggle="tooltip" data-placement="top" title="You could press also press d" style="width:100%;height:90px;" type="button" class="btn btn-lg btn-outline-success">Start!</button>
	</div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  	<script>
		$(function () {
		  $('[data-toggle="tooltip"]').tooltip()
		})

    if (navigator.appVersion.indexOf("Win")!=-1){
      document.getElementById("windows").classList.add("Active");
      document.getElementById("mac").classList.remove("Active");
      document.getElementById("Linux/Unix").classList.remove("Active");
    }else if (navigator.appVersion.indexOf("Mac")!=-1){
      document.getElementById("windows").classList.remove("Active");
      document.getElementById("mac").classList.add("Active");
      document.getElementById("Linux/Unix").classList.remove("Active");
    }else if (navigator.appVersion.indexOf("X11")!=-1){
      document.getElementById("windows").classList.remove("Active");
      document.getElementById("mac").classList.remove("Active");
      document.getElementById("Linux/Unix").classList.add("Active");
    }else if (navigator.appVersion.indexOf("Linux")!=-1){
      document.getElementById("windows").classList.remove("Active");
      document.getElementById("mac").classList.remove("Active");
      document.getElementById("Linux/Unix").classList.add("Active");
    }else{
      document.getElementById("windows").classList.remove("Active");
      document.getElementById("mac").classList.remove("Active");
      document.getElementById("Linux/Unix").classList.remove("Active");
    }

    document.write('Your OS: '+OSName);


    var downloads = {
      Java:{
        winUrl: "http://javadl.oracle.com/webapps/download/AutoDL?BundleId=227521_e758a0de34e24606bca991d704f6dcbf",
        macUrl: "https://javadl.oracle.com/webapps/download/AutoDL?BundleId=235718_2787e4a523244c269598db4e85c51e0c",
        info: "https://java.com/inc/BrowserRedirect1.jsp?locale=en"
      },
      Git:{
        winUrl: "https://github.com/git-for-windows/git/releases/download/v2.19.2.windows.1/Git-2.19.2-64-bit.exe",
        info: "https://git-scm.com/downloads"
      },
    	Atom:{
    		winUrl:"https://atom.io/download/windows_x64",
    		info:"https://atom.io/",
    	}
    }
    for(var down in downloads){
      document.getElementById("links").appendChild(document.createElement("BR"))
      var downloadLink = document.createElement("DIV");
      downloadLink.classList.add("btn-group");
      downloadLink.classList.add("btn-group-toggle");
      downloadLink.setAttribute("data-toggle","buttons");
      downloadLink.style.width="100%";
      downloadLink.style.display="flex";
      downloadLink.style.justifyContent="center";

        var downloadName = document.createElement("DIV");
        downloadName.classList.add("input-group-prepend");

          var downloadNameText = document.createElement("DIV");
          downloadNameText.classList.add("input-group-text");
          downloadNameText.innerText = down;
          downloadName.appendChild(downloadNameText);

        downloadLink.appendChild(downloadName);

        for(var url in downloads[down]){
          var downloadBtn = document.createElement("LABEL");
          downloadBtn.classList.add("btn");
          var downloadBtnBtn = document.createElement("INPUT");
          downloadBtnBtn.setAttribute("type","radio");
          downloadBtnBtn.setAttribute("autocomplete","off");
          if(url=="winUrl"){
            downloadBtn.classList.add("btn-outline-success");
            downloadBtn.classList.add("active");
            downloadBtnBtn.checked = true;
            downloadBtn.innerText="Download";
            downloadBtn.id = down+"_download"
          }else if(url=="info"){
            downloadBtn.classList.add("btn-outline-info");
            downloadBtn.innerText="Open Download Page";
            downloadBtn.id = down+"_info"
          }
          downloadBtn.appendChild(downloadBtnBtn);
          downloadLink.appendChild(downloadBtn);
        }
        var downloadBtn = document.createElement("label");
        downloadBtn.classList.add("btn");
        downloadBtn.classList.add("btn-outline-dark");
        downloadBtn.innerText="null";
        var downloadBtnBtn = document.createElement("INPUT");
        downloadBtnBtn.setAttribute("type","radio");
        downloadBtnBtn.setAttribute("autocomplete","off");
        downloadBtn.appendChild(downloadBtnBtn);
        downloadLink.appendChild(downloadBtn);

      document.getElementById("links").appendChild(downloadLink);
    }
    window.onkeydown = function(e) {
       var key = e.keyCode ? e.keyCode : e.which;
       if (key == 68) {
           start();
       }
    }
    function start(){
      for(var down in downloads){
        var btn = document.getElementById(down+"_download");
        if(btn.classList.contains("active"))
          for(var url in downloads[down]){
            if(url=="winUrl"){
              console.log("Going to: "+ downloads[down][url]);
		            openInNewTab(downloads[down][url]);
            }
          }
      }
      for(var down in downloads){
        var btn = document.getElementById(down+"_info");
        if(btn.classList.contains("active"))
          for(var url in downloads[down]){
            if(url=="info"){
              console.log("Going to: "+ downloads[down][url]);
              //window.open(downloads[down][url]);//NOT working???
          		openInNewTab(downloads[down][url]);
            }
          }
      }
    }

    function openInNewTab(url) {
      var win = window.open(url, '_blank');
      win.focus();
    }
  	</script>
  </body>
</html>
